# Arduino

## 소개

* 아두이노(Arduino)는 오픈 소스 하드웨어로 제작되는 단일 보드 마이크로 콘트롤러 및 관련 개발 도구/제품과 개발환경을 말한다.
   - [아두이노@위키피디아](https://ko.wikipedia.org/wiki/%EC%95%84%EB%91%90%EC%9D%B4%EB%85%B8)
   - 오픈 소스 하드웨어이다보니 설계 및 스펙이 공개되어 있어 다양한 호환제품들이 존재한다.

### 조사 및 학습 내용

* 제품일반
   - 2016년 7월 현재, Aduino Uno R3 등이 최신의 제품으로 파악된다.
      - Arduino Due, Diecimila, Duemilanove 등은 구형 보드임. 새로 살거면 Uno로 사자.
      - Arduino Nano는 좀더 작게만든 것으로, 핀이 아니라 점퍼만 있어서 브레드보드등을 같이 사용해야할 듯한데, 단종모델인듯함
   - 주학습자료: [나의 첫 아두이노 프로젝트](http://book.daum.net/detail/book.do?bookid=KOR9788966260676)
   - 아두이노 23보다 아두이노 1.0이 최신 (버전을 재정립하면서...)

* 관련 정보
   - [아두이노 프로그래밍@위키피디아](https://ko.wikipedia.org/wiki/%EC%95%84%EB%91%90%EC%9D%B4%EB%85%B8_%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D)
   - [아두이노 라이브러리@위키피다아](https://ko.wikipedia.org/wiki/%EC%95%84%EB%91%90%EC%9D%B4%EB%85%B8_%EB%9D%BC%EC%9D%B4%EB%B8%8C%EB%9F%AC%EB%A6%AC)

### 추가 조사 필요
   - 피지컬 컴퓨팅(Physicsal Computing)
   - AVR부트로더

## 아두이노 개요

### 보드 구성 및 동작
   - 오리지널 아두이노 보드는 ATMEL('아트멜' 또는 '애트멜'로 읽음)의 8bit 마이크로 콘트롤러칩을 사용한다.
      - ATmega328/168칩 등의 megaAVR시리즈의 칩사용 (Uno, Nano등은 328사용)
      - 어느 정도의 프로그래밍이 가능하겠으나, 아마 라즈베리파이등과 같이 범용OS를 올릴 정도는 아닐 듯
      - Intel X86/x64호환 cpu가 아니니 만치, 전용의 프로그래밍 도구(컴파일러)도 필요하다
      - 개발작업을 하던 컴퓨터에서부터 해당 아두이노 보드로 프로그램을 전송하고 실행시킬 방법이 안내되어있음(AVR부트로더체계 사용)
      - ATMega328등에 플래시(Flash)메모리가 있어 프로그램코드 저장가능
   - USB케이블 또는 별도의 전원 어댑터, 또는 배터리 등으로 전원을 넣어 동작시킬 수 있다
   - 센서, 모터 등의 제어와 신호입출력을 위한 단자들이 제공된다.
   - 3V, 5V 전원 출력(다른 회로/장비로의 공급용)과 Gnd(Ground, 그라운드) 단자와 아날로그용/디지털 I/O용 핀등이 여러개 제공된다

### 왜 아두이노인가?
   - 위에 언급된 필요 요소에 대해 기존의 마이크로 콘트롤러(PIC, 8051 등의 콘트롤러칩- 용어의 마이크로콘트롤러 항목 참조) 등에 비교해서, 표준화된 형태로 제공되는 정보 및 도구들이 많다
   - 초보자들이 가볍게 시작하기 좋게 만들어진 장비이다보니 범용적인 I/O 핀등과 제어방법등에 대한 자료가 많이 있다
   - 서적도 많이 출간되었고, 인터넷을 통해 문서 및 자료, IDE 등을 구하기가 용이하다

### 표준 Arduino Uno R3의 단자 소개

전원부와 USB단자를 왼쪽으로 오도록 두었을 때,

   - 하단 중앙부 : 3V3 (3.3V출력), 5V(5V출력), GND(접지/그라운드),VIN(배터리 사용시 전원입력단자)
   - 하든 우측 : A0~A5 : 아나로그 Input-Output(I/O) 핀(Pin) - 0~1023의 1024단계 (2의 10승)
   - 상단 : D0~D13 (또는 0~13) : 디지털 I/O Pin. D3, D5, D6, D9, D10, D11 등은 아날로그 출력(0~255, 2의 8승))으로 사용가능
   - 호환보드들의 경우 일부 Pin이 특정용도로 선점되어 사용될 수 있으니 확인할 것


기타 보드 종류에 따라 Reset버튼 및 기타의 점퍼 등이 존재한다.

## 아두이노 코딩/개발

### 개발 도구 및 환경 개요

* 아두이노 IDE를 arduino.cc 등에서 다운로드 할 수 있음
   - 컴파일러: avr-gcc
   - 개발언어: C/C++
   - 통합개발환경(IDE)가 있으니, 이걸 쓸 것
   - [아두이노 프로그래밍]항목을 한 번 정도 읽어보자

### 아두이노 개발 환경 셋팅

#### 1. 아두이노 IDE 설치

* 먼저 아두이노 장비를 연결했으면 일단 분리할 것
* 2016년 7월 9일 현재 버전은 1.6.9임. 
* www.arduino.cc사이트의 [다운로드 페이지](https://www.arduino.cc/en/Main/Software)에서 받아서 IDE 설치
	* 작성자의 장비가 Win10 64bit 한글, MS Surface Pro 3이므로 그에 맞춰 설명
* 프로그램 설치 경로: 
	*  64bit 윈도우: **C:\Program Files (x86)\Arduino**
	*  32bit 윈도우: (아마도)**C:\Program Files\Arduino**
* 참고1: IDE설치하면, 같이 USB드라이버 파일도 **C:\Program Files (x86)\Arduino\drivers**폴더에 저장됨. 
* 참고2: Jarduino-Uno-BT보드용 추가 작업
	* 작성자는 제이씨넷의 호환보드를 사용하였기에, 거기의 내용대로 추가파일복사/설치를 하였
	* [제이씨넷 자료실](http://jcnet.co.kr/?page_id=77)에서 avrdude.exe, rxtxSerial.dll, ardude.conf 등을 받아서 설치함

#### 2. USB 드라이버 설치

* IDE설치가 정상적으로 진행이 되면, 그 다음 단계로는 USB드라이버를 설치한다.
	* 아두이노 보드가 USB케이블로 연결되므로, 적절한 드라이버 설정이 되어야 실제로 PC에서 아두이노 보드와 통신이 가능하다(너무 당연한 이야기다)
* 순서
	* USB케이블로 아두이노 보드와 컴퓨터를 연결
		* Win 7 등에서는 자동으로 인식하여 설치되는 경우도 있다고 하던데, 작성자의 Win 10에서는 자동인식/설치가 되지 않았음
	* 만일 성공적으로 자동설치되고 인식되었다면 아래의 "정상설치가 되면"항목으로 진
	* 자동설치 되지 않을 경우 다음의 내용을 참고하여 진행
		* Windows의 **장치관리자**를 확인하면서, USB케이블로 아두이노 보드(작성자는 Jarduino보드)를 연결
		* **포트(COM & LPT)**항목이 새로 추가되면서 하위항목으로 Com포트가 추가됨
		* 해당 Com포트에서 마우스 우클릭으로 **드라이버 소프트웨어 업데이트**를 선택
		* 자동으로 검색 대신에, **컴퓨터에서 드라이버 소프트웨어 찾아보기**선택
		* **다음 위치에서 드라이버 소프트웨어 검색** 항목에서 **찾아보기**버튼을 클릭한 후, **C:\Program Files (x86)\Arduino\drivers** 폴더를 선택하고 하단의 **다음**버튼을 선택하여 설치
		* 장치 종류를 선택해야된다면 Arduino Uno R3모델이거나 그 호환모델이면 **Arduino Uno**를 선택하면 됨.(작성자도 Arduino Uno선택)
	* 정상설치가 되면 **장치관리자 > 포트(COM & LPT)** 하위의 Com포트가 **Arduino Uno(COM3)** 등으로 보일 것임
		* COM뒤의 번호는 아마도 환경별로 다를 것으로 추측됨. 작성자의 경우 COM3-시리얼3번포트-로 잡혔음. 
		* COMx번호는 이후에 IDE에서 실제로 아두이노 보드와 통신할 때 지정되어야 하는 값이므로 확인해둘 것

### 태스트 실습

* 정상 설치 및 셋팅 확인을 위해 인터넷상에서 알려진 예제를 한 번 시도해봄
	* 실습용 예제: 가치창조기술Wiki라는 곳의 [01.LED 깜박이기](http://wiki.vctec.co.kr/opensource/arduino/arduinotutorial_led)를 시도 
* 순서
	* IDE 실행
	* 위의 [01.LED 깜박이기](http://wiki.vctec.co.kr/opensource/arduino/arduinotutorial_led)의 내용대로 코드 작성
	* 툴(tool)메뉴에서 "보드"와 "포트"설정을 확인
		* 보드: **Arduino/Genuino Uno** (작성자의 보드가 Arduino Uno호환보드라서)
		* 포트: **Com3**선택 (앞의 USB 드라이버 설치시 확인한 포트)
	* 업로드 버튼 클릭 (메뉴 아래의 아이콘 중 2번째의 오른쪽화살표 아이콘)
* 정상동작되었다면, LED중 하나가 1초동안 켜지고 1초동안 꺼지는 것을 볼 수 있음
	* 작성자의 Jaruduino 보드는 블루투스 내장보드라서, 예제에서 이야기하는 D13포트에 연결된 LED외에도 블루투스동작과관련된 LED가 추가로 더 있었는데, 점멸간격이 틀려서 구별이 가능했음.
	* 원래의 점멸간격은 약 0.5초 켜지고, 1.5초정도 꺼지는 그런 정도였는데, 프로그램 업로드 실행 후, 1초 켜지고 1초 꺼지는 동작을 함. (정상동작)


## Appendix(부록)

### 용어

* 쉴드(Shield) - 특정 기능을 갖는 보드로, 아두이노와 결합하여 호환 가능한 여러 부가 모듈과 연결하는 커넥터 구조를 포함한 부품.
(Ref: [아두이노@위키피디아](https://ko.wikipedia.org/wiki/%EC%95%84%EB%91%90%EC%9D%B4%EB%85%B8#.EC.89.B4.EB.93.9C))
* 마이크로콘트롤러, MCU : 마이크로프로세서와 입출력 모듈을 하나의 칩으로 만들어져 정해진 기능을 수행하는 컴퓨터로 보통 저클럭, ADC/DAC 내장된 소형의 제어용 칩을 지칭함. (ref: [마이크로콘트롤러@위키피디아](https://ko.wikipedia.org/wiki/%EB%A7%88%EC%9D%B4%ED%81%AC%EB%A1%9C%EC%BB%A8%ED%8A%B8%EB%A1%A4%EB%9F%AC))
* 프로세싱: 프로그래밍 언어/IDE중 하나. (ref: [프로세싱@위키피디아](https://ko.wikipedia.org/wiki/%ED%94%84%EB%A1%9C%EC%84%B8%EC%8B%B1_(%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D_%EC%96%B8%EC%96%B4)))
* 스케치 : 아두이노에서 사용하는 소스코드를 가리키는 용어